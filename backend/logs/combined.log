{"level":"error","message":"Erro ao iniciar o servidor:","name":"SequelizeConnectionRefusedError","original":{"code":"ECONNREFUSED"},"parent":{"code":"ECONNREFUSED"},"service":"sistema-rh-backend","stack":"SequelizeConnectionRefusedError\n    at Client._connectionCallback (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:133:24)\n    at Client._handleErrorWhileConnecting (/home/ubuntu/sistema-rh-online/backend/node_modules/pg/lib/client.js:336:19)\n    at Client._handleErrorEvent (/home/ubuntu/sistema-rh-online/backend/node_modules/pg/lib/client.js:346:19)\n    at Connection.emit (node:events:524:28)\n    at Socket.reportStreamError (/home/ubuntu/sistema-rh-online/backend/node_modules/pg/lib/connection.js:57:12)\n    at Socket.emit (node:events:524:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-05-19 21:42:38"}
{"level":"error","message":"Erro ao iniciar o servidor:","name":"SequelizeConnectionRefusedError","original":{"code":"ECONNREFUSED"},"parent":{"code":"ECONNREFUSED"},"service":"sistema-rh-backend","stack":"SequelizeConnectionRefusedError\n    at Client._connectionCallback (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:133:24)\n    at Client._handleErrorWhileConnecting (/home/ubuntu/sistema-rh-online/backend/node_modules/pg/lib/client.js:336:19)\n    at Client._handleErrorEvent (/home/ubuntu/sistema-rh-online/backend/node_modules/pg/lib/client.js:346:19)\n    at Connection.emit (node:events:524:28)\n    at Socket.reportStreamError (/home/ubuntu/sistema-rh-online/backend/node_modules/pg/lib/connection.js:57:12)\n    at Socket.emit (node:events:524:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-05-19 21:43:36"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:44:25"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:44:25"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:44:25"}
{"level":"error","message":"Erro ao iniciar o servidor: SQLITE_ERROR: no such column: tenantId","name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"service":"sistema-rh-backend","sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)","stack":"Error\n    at Database.<anonymous> (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:185:27)\n    at /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:183:50\n    at new Promise (<anonymous>)\n    at Query.run (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:183:12)\n    at /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at async SQLiteQueryInterface.addIndex (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:250:12)\n    at async Department.sync (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/model.js:999:7)\n    at async /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:389:11\n    at async withSqliteForeignKeysOff (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/sqlite-utils.js:14:12)\n    at async Sequelize._syncModelsWithCyclicReferences (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:387:7)","timestamp":"2025-05-19 21:44:25"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:46:33"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:46:33"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:46:33"}
{"level":"error","message":"Erro ao iniciar o servidor: SQLITE_ERROR: no such column: tenantId","name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"service":"sistema-rh-backend","sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)","stack":"Error\n    at Database.<anonymous> (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:185:27)\n    at /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:183:50\n    at new Promise (<anonymous>)\n    at Query.run (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:183:12)\n    at /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at async SQLiteQueryInterface.addIndex (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:250:12)\n    at async Department.sync (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/model.js:999:7)\n    at async /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:389:11\n    at async withSqliteForeignKeysOff (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/sqlite-utils.js:14:12)\n    at async Sequelize._syncModelsWithCyclicReferences (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:387:7)","timestamp":"2025-05-19 21:46:33"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:47:08"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:47:08"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:47:08"}
{"level":"error","message":"Erro ao iniciar o servidor: SQLITE_ERROR: no such column: tenantId","name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"service":"sistema-rh-backend","sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)","stack":"Error\n    at Database.<anonymous> (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:185:27)\n    at /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:183:50\n    at new Promise (<anonymous>)\n    at Query.run (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/query.js:183:12)\n    at /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at async SQLiteQueryInterface.addIndex (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:250:12)\n    at async Department.sync (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/model.js:999:7)\n    at async /home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:389:11\n    at async withSqliteForeignKeysOff (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/dialects/sqlite/sqlite-utils.js:14:12)\n    at async Sequelize._syncModelsWithCyclicReferences (/home/ubuntu/sistema-rh-online/backend/node_modules/sequelize/lib/sequelize.js:387:7)","timestamp":"2025-05-19 21:47:08"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:13"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:13"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:13"}
{"level":"info","message":"Sincronizando modelos com o banco de dados (force: true)","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:13"}
{"error":{"name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"sql":"CREATE UNIQUE INDEX `departments_tenant_id_nome` ON `departments` (`tenantId`, `nome`)"},"level":"error","message":"Erro ao sincronizar modelos com o banco de dados","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:13"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:44"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:44"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:44"}
{"level":"info","message":"Sincronizando modelos com o banco de dados (force: true)","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:44"}
{"error":{"name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `employees_tenant_id_cpf` ON `employees` (`tenantId`, `cpf`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `employees_tenant_id_cpf` ON `employees` (`tenantId`, `cpf`)"},"sql":"CREATE UNIQUE INDEX `employees_tenant_id_cpf` ON `employees` (`tenantId`, `cpf`)"},"level":"error","message":"Erro ao sincronizar modelos com o banco de dados","service":"sistema-rh-backend","timestamp":"2025-05-19 21:48:44"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:49:28"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:49:28"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:49:28"}
{"level":"info","message":"Sincronizando modelos com o banco de dados (force: true)","service":"sistema-rh-backend","timestamp":"2025-05-19 21:49:28"}
{"error":{"name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE INDEX `movements_tenant_id_colaborador_id` ON `movements` (`tenantId`, `colaboradorId`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE INDEX `movements_tenant_id_colaborador_id` ON `movements` (`tenantId`, `colaboradorId`)"},"sql":"CREATE INDEX `movements_tenant_id_colaborador_id` ON `movements` (`tenantId`, `colaboradorId`)"},"level":"error","message":"Erro ao sincronizar modelos com o banco de dados","service":"sistema-rh-backend","timestamp":"2025-05-19 21:49:28"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:50:59"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:50:59"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:50:59"}
{"level":"info","message":"Sincronizando modelos com o banco de dados (force: true)","service":"sistema-rh-backend","timestamp":"2025-05-19 21:50:59"}
{"error":{"name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `positions_tenant_id_nome_nivel` ON `positions` (`tenantId`, `nome`, `nivel`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `positions_tenant_id_nome_nivel` ON `positions` (`tenantId`, `nome`, `nivel`)"},"sql":"CREATE UNIQUE INDEX `positions_tenant_id_nome_nivel` ON `positions` (`tenantId`, `nome`, `nivel`)"},"level":"error","message":"Erro ao sincronizar modelos com o banco de dados","service":"sistema-rh-backend","timestamp":"2025-05-19 21:50:59"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:51:23"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:51:23"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:51:23"}
{"level":"info","message":"Sincronizando modelos com o banco de dados (force: true)","service":"sistema-rh-backend","timestamp":"2025-05-19 21:51:23"}
{"error":{"name":"SequelizeDatabaseError","original":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `users_tenant_id_email` ON `users` (`tenantId`, `email`)"},"parameters":{},"parent":{"code":"SQLITE_ERROR","errno":1,"sql":"CREATE UNIQUE INDEX `users_tenant_id_email` ON `users` (`tenantId`, `email`)"},"sql":"CREATE UNIQUE INDEX `users_tenant_id_email` ON `users` (`tenantId`, `email`)"},"level":"error","message":"Erro ao sincronizar modelos com o banco de dados","service":"sistema-rh-backend","timestamp":"2025-05-19 21:51:23"}
{"level":"info","message":"Inicializando banco de dados no ambiente: development","service":"sistema-rh-backend","timestamp":"2025-05-19 21:52:02"}
{"level":"info","message":"Usando SQLite para ambiente de desenvolvimento/teste","service":"sistema-rh-backend","timestamp":"2025-05-19 21:52:02"}
{"level":"info","message":"Conexão com o banco de dados estabelecida com sucesso.","service":"sistema-rh-backend","timestamp":"2025-05-19 21:52:02"}
{"level":"info","message":"Sincronizando modelos com o banco de dados (force: true)","service":"sistema-rh-backend","timestamp":"2025-05-19 21:52:02"}
{"level":"info","message":"Sincronização concluída com sucesso","service":"sistema-rh-backend","timestamp":"2025-05-19 21:52:02"}
{"level":"info","message":"Servidor iniciado na porta 3001","service":"sistema-rh-backend","timestamp":"2025-05-19 21:52:02"}
